<%- include("../../views/partials/user/header") %>
<link rel="stylesheet" href="/css/userCss/profileView.css">
    <!-- Main Content -->
    <div class="container mt-4">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 mb-4">
                <div class="list-group">
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'dashboard') ? 'active' : '' %>" onclick="location.href='/profileview/<%= user._id %>'">
                        My Profile
                    </button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'wishlist') ? 'active' : '' %>" onclick="location.href='/wishlist/<%= user._id %>'">Wishlists</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'cart') ? 'active' : '' %>" onclick="location.href='/cartView'">Cart</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'orders') ? 'active' : '' %>" onclick="location.href='/viewOrder'">Orders</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'account details') ? 'active' : '' %>" onclick="location.href='/userDetails/<%= user._id %>'">Account Details</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'address management') ? 'active' : '' %>" onclick="location.href='/addresses/<%= user._id %>'">Address Management</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'addAddress') ? 'active' : '' %>" onclick="location.href='/addAddress'">Add New Address</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'coupons') ? 'active' : '' %>" onclick="location.href='/coupons/<%= user._id %>'">Coupons</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'order history') ? 'active' : '' %>" onclick="location.href='/orderHistory/<%= user._id %>'">Order History</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'track order') ? 'active' : '' %>" onclick="location.href='/trackOrder/<%= user._id %>'">Track Order</button>
                    <button type="button" class="list-group-item list-group-item-action <%= (activePage === 'wallet') ? 'active' : '' %>" onclick="location.href='/wallet/<%= user._id %>'">Wallet</button>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="col-md-9">
                <h2 class="mb-4">User Profile</h2>

                <!-- Summary Cards -->
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <div class="card text-white bg-primary">
                            <div class="card-body">
                                <h5 class="card-title">Total Orders</h5>
                                <p class="card-text"><%= totalOrders || 0 %></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card text-white bg-warning">
                            <div class="card-body">
                                <h5 class="card-title">Pending Orders</h5>
                                <p class="card-text"><%= pendingOrders || 0 %></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card text-white bg-success">
                            <div class="card-body">
                                <h5 class="card-title">Completed Orders</h5>
                                <p class="card-text"><%= completedOrders || 0 %></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card text-white bg-danger">
                            <div class="card-body">
                                <h5 class="card-title">Returned Orders</h5>
                                <p class="card-text"><%= returnedOrders || 0 %></p>
                            </div>
                        </div>
                    </div>
                </div>
                <% if (totalOrders === 0) { %>
                    <p>No orders have been placed yet.</p>
                <% } %>
                <!-- Billing Address -->
                <div class="mb-4">
                    <h4>Last Added Address</h4>
                    <% if (lastAddedAddress) { %>
                        <p id="billingAddress">
                            <strong>Type:</strong> <%= lastAddedAddress.addressType %><br>
                            <strong>Name:</strong> <%= lastAddedAddress.name || "Name not provided" %><br>
                            <strong>Landmark:</strong> <%= lastAddedAddress.landMark || "Landmark not provided" %><br>
                            <strong>City:</strong> <%= lastAddedAddress.city || "City not provided" %><br>
                            <strong>State:</strong> <%= lastAddedAddress.state || "State not provided" %><br>
                            <strong>Pincode:</strong> <%= lastAddedAddress.pincode || "Pincode not provided" %><br>
                            <strong>Phone:</strong> <%= lastAddedAddress.phone || "Phone not provided" %><br>
                            <% if (lastAddedAddress.altPhone) { %>
                                <strong>Alternate Phone:</strong> <%= lastAddedAddress.altPhone %><br>
                            <% } %>
                        </p>
                        <button class="btn btn-primary" onclick="location.href='/addressEdit/<%= lastAddedAddress._id %>'">Edit Address</button>
                    <% } else { %>
                        <p id="billingAddress">No Address Available</p>
                        <button class="btn btn-primary" onclick="location.href='/addAddress'">Add Address</button>
                    <% } %>
                </div>
                <!-- Account Information -->
                <div class="mb-4">
                    <h4>Account Information</h4>
                    <p id="accountInfo">
                        <%= user.name || "No Name Provided" %>,
                        <%= user.email || "No Email Provided" %>,
                        <%= user.phone || "No Phone Number Provided" %>
                    </p>
                    <button class="btn btn-primary" onclick="location.href='/editUser'">Edit Account Info</button>
                </div>

                <!-- Optional Form Section -->
                <!-- You can add more forms and content as needed -->

            </div>
        </div>
    </div>


    

<%-include("../../views/partials/user/footer")%>
<script src="/js/userJs/profileView.js"></script>